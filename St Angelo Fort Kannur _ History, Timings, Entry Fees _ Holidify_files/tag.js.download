!function(){var t={exports:{}};t.exports,t.exports=function(i){if(i._CTZG&&i._CTZG.bootloader&&!i._CTZG.bootloaderConfig)return{boot(){return null}};const s=i._CTZG||{};function l(t,o,e){if(t){let e=t;if("string"==typeof o&&(o=o.split(".")),!Array.isArray(o))throw new Error("invalid path argument");for(let t=0;t<o.length;t+=1){if(o.length-t==1&&void 0!==e[o[t]])return e[o[t]];if("object"!=typeof e[o[t]])break;e=e[o[t]]}}return e}function c(t){return t&&t.trim&&t.trim()}function u(t){const o={};return t.forEach(t=>{var[t,e]=t;o[t]=e}),o}(i._CTZG=s).bootloader=s.bootloader||{},s.bootloader.version=s.bootloader.version||"c8224c3be112871f694bc7caef5c7abefe84735a23ca0f5e44b0a6f82ff59c24",s.isDebugMode=/CTI_FORCE_DEBUG=1/.test(i.document.cookie),i.CTI_FORCE_DEBUG=function(t){i.document.cookie="CTI_FORCE_DEBUG="+(t?"1":"0"),i.location.reload()},i.CTZ_BAC_FORCE_SESSION_CONFIG=function(t){i.document.cookie="CTZ_BAC_FORCE_SESSION_CONFIG="+t,i.location.reload()},i.CTZ_FORCE_WIDGET=function(t){let e=f("CTZ_FORCE_WIDGET")||"";e=e.length?e+","+t:t,i.document.cookie="CTZ_FORCE_WIDGET="+e,i.location.reload()};const t=function(t){return t.reduce((t,e)=>t.concat(e),[])},e=function(t){t=i.document.querySelectorAll(t);return Array.prototype.slice.call(t)},n=function(t){return t&&t.split?u(t.split("&").map(t=>t.split("="))):{}};function p(t){switch(typeof t){case"string":return{true:!0,false:!1}[t];case"boolean":return t;default:return Boolean(t)}}function a(){s.isDebugMode&&console.log.apply(null,["[Bootloader]"].concat(arguments))}function d(){s.isDebugMode&&console.error.apply(null,["[Bootloader]"].concat(arguments))}function f(t){t=i.document.cookie.match(`(^|;)\\s*${t}\\s*=\\s*([^;]+)`);return t?t.pop():void 0}function m(t,e){s.bootloader[t]=e}function o(t){return s.bootloader[t]}function r(t,e,o,n){const r=new(i.XMLHttpRequest||i.ActiveXObject)("MSXML2.XMLHTTP.3.0");r.withCredentials=e.withCredentials,r.onload=function(){let t=r["response"];"json"===e.responseType&&(t=i.JSON.parse(r.response)),o(t)},r.open(t,e.url,1),r.onreadystatechange=function(){4===r.readyState&&200!==r.status&&n&&n()},r.send(e.payload)}function h(){var t=l(i,"_CTZ.consent",null)||l(i,"_CTZS.consent",null);let e=!0;return e=t?Object.prototype.hasOwnProperty.call(t,"allowed")?p(t.allowed):(a("[CTZ] Consent object present but missing properties :: defaulting to false"),!1):e}function b(){return t(["script[src*='//static.clicktripz.com/tag.js']","script[src*='//compare-static'][src*='/tag.js']","script[src*='//localhost:8089/tag.js']","script[src*='//static.clicktripz.com/r/ucb.js']","script[src*='//compare-static'][src*='/ucb.js']","script[src*='//localhost:8088/r/ucb.js']","script[src*='//localhost:8089/r/ucb.js']","script[src*='//localhost:8089/r/ucb.src.js']"].map(e)).filter(function(t){var e=t.getAttribute&&(t.getAttribute("data-alias")||t.getAttribute("data-publisher")),o=/.*\.js\?(.*)/,o=t&&t.src&&o.exec(t.src)&&o.exec(t.src)[1];return n(o).gwi||e})[0]}function g(t){var e=t.src.match("^https?://([^/]+)/.*$"),e=e?e[1]:"static.clicktripz.com",o=/compare-static/.test(e)?e.replace("compare-static","compare"):"www.clicktripz.com";return{hostName:o,apiHostName:/compare-static/.test(e)?e.replace("compare-static","compare"):"api.clicktripz.com",publisherAlias:t.getAttribute("data-alias")||null,publisherHash:t.getAttribute("data-publisher")||null,fpcsEnabled:!/clicktripz\.com/.test(o)}}function C(t,e){var e=t.fpcsEnabled&&!e,o=f("_ctpuid"),n=`https://${t.hostName}/api/integrations/v1/constrain`;let r="?";if(null!==t.publisherAlias)r+="publisherAlias="+t.publisherAlias;else{if(null===t.publisherHash)return void d(new Error("Unable to determine constrainURL :: no publisher identifier"));r+="h="+t.publisherHash}return void 0!==o&&(r+="&cpid="+o),e?(s.bootloader.useFPCSCookieSync=!0,t=n+r,t+="&u="+i.location.href,"https://www.clicktripz.com/api/integrations/v1/constrain"+r+"&r="+encodeURIComponent(t)):n+r+"&u="+i.location.href}function y(t,e,o){r("GET",{url:t,responseType:"json",withCredentials:!0},e,o)}function v(e,o){y("https://www.clicktripz.com/api/integrations/v1/constrain",()=>{var t=C(e,!1);m("adblockIsEnabled",!1),y(t,t=>{o(t)})},()=>{var t=C(e,!0);m("adblockIsEnabled",!0),y(t,t=>{o(t)})})}function E(t,e){y(C(t),t=>{e(t)})}function w(t,e){t.fpcsEnabled?v(t,t=>{e(t)}):E(t,t=>{e(t)})}function T(t,e){r("POST",{url:`https://${t.apiHostName}/c11g/v0/a/`+(l(o("constrain"),"data.PublisherMetadataModule.publisherAlias",!1)||t.publisherAlias||t.publisherHash),responseType:"json",withCredentials:!0,payload:JSON.stringify({ClientContext:{userAgent:i.navigator.userAgent,locationHostname:i.location.hostname,locationPath:i.location.pathname,locationSearch:i.location.search,documentCookie:i.document.cookie},protocol:"1"})},t=>{!t.bootloader&&t.Bootloader&&(t.bootloader=t.Bootloader),e(t)},()=>{d("boot sequence terminated: client-config request failure")})}function _(t,o){{var n={method:"POST",url:"https://api.clicktripz.com/c11g/v0/gw/"+t["@id"],responseType:"json",withCredentials:!0,body:{ClientContext:{userAgent:i.navigator.userAgent,locationPath:i.location.pathname,locationSearch:i.location.search,cookie:function(t){const e=u(i.document.cookie.split(";").map(c).map(function(e){return function(t){return t&&t.split&&t.split(e)}}("=")));return u(t.map(t=>[t,e[t]]))}(l(t,"clientContext.cookie",[])),dataLayer:function(t){if(!i.dataLayer||!i.dataLayer.slice)return{};const o=i.dataLayer.slice().reverse();let n;const r=(t,e)=>{for(const o in t){if(o===e){n=t[o];break}!t[o]||"object"!=typeof t[o]||t[o]instanceof Element||r(t[o],e)}return n},e=t.map(t=>{n="";for(const e of o)if(r(e,t),n)break;return[t,n]});return u(e)}(l(t,"clientContext.dataLayer",[]))}}},r=(t,e)=>{if(t)return d("boot sequence terminated: gateway request failure");o(e)};const a=new(i.XMLHttpRequest||i.ActiveXObject)("MSXML2.XMLHTTP.3.0");a.withCredentials=!0,a.onreadystatechange=function(){var t=4===a.readyState,e=200===a.status;if(t)return e?void r(null,JSON.parse(a.responseText)):r(new Error(n.url+" returned status "+a.status))},t=n.body&&JSON.stringify(n.body)||void 0,a.open(n.method,n.url,1),a.send(t)}}function k(t){return l(t,["data","userOptedOut"],!1)}const O=function(t){let e=!1,o;return function(){return e||(e=!0,o=t.apply(this,arguments)),o}}(t=>{if(l(t,["assessment"],!1))return a("scripts.main not loaded due to assessment: true");t=l(t,["scripts","main"],[]);(Array.isArray(t)?t:[t]).forEach(t=>{L(t,t=>{t&&t.init&&t.init(s)})})});function A(r,e){function a(t){O(e),t.currentTarget.removeEventListener(t.type,a)}r&&(r.interactionElements||[]).forEach(t=>{var e,o,n=i.document.querySelector(t);p(n)?(e=n,n=r.interactionEvents,o=a,n.forEach(t=>{e.addEventListener(t,o)})):d(`Element: ${t} not found for ensureLoadForInteractionEvents.`)})}function S(t){var e,o=t.loadOnAny||[],n=o.filter(t=>"number"==typeof t.timeout),o=o.filter(t=>t.interactionElements&&0<t.interactionElements.length&&t.interactionEvents&&0<t.interactionEvents.length);n.length||o.length?(A(o[0],t),o=n[0],e=t,o&&setTimeout(()=>{O(e)},o.timeout||0)):O(t)}function j(t,e){function n(e){return l((o=r,Object.keys(o).map(t=>[t,o[t]]).filter(t=>{return t[1].some(t=>t===e)})),[0,0]);var o}const r=l(e,"icc.bootloader.scripts.bundles",[]),o=l(e,"icc.bootloader.scripts.mappings",{}),a=l(e,"icc.bootloader.scripts.bundleMappings",{});function i(t){return l(o,t,l(a,[t,"version"]))}var t=!i(c=function t(e){var o=n(e);return o?t(o):e}(t))||s.isDebugMode?t:c,c=i(t);return/^https?:\/\/.*/.test(c)?c:`https://${l(e,"hostnames.static")}/asset/${t}/${c}.js`}const L=function(e,t){if(!t)return d(`Module '${e}' not loaded. Provide callback to load async from mappings.`);try{var o=j(e,s.bootloader);if(!o)throw new Error(`No asset found for require("${e}")`);var n=i.document.createElement("script");n.src=o,n.setAttribute("data-ctz-script-type",e),n.type="text/javascript",n.async=!0,n.onload=function(){try{t(i._ctrequire(e)),a("Successfully loaded module :: "+e)}catch(t){d(`Exception thrown from running '${e}' module.`,t)}},(i.document.body||i.document.getElementsByTagName("head")[0]).appendChild(n)}catch(t){d(`Unable to load module '${e}' `+t)}};function M(t,e){return L(t,e)}function G(){setTimeout(()=>{if(!h())return a("boot sequence terminated: consent.allowed != true");if(i._CTZG.bootloaderConfig){const e=i._CTZG["bootloaderConfig"];void _(e,t=>{m("clientConfig",t),S(e)})}else{var t=b();if(!t)return d("Couldn't find tag.js script element on page. Check for data attributes or 'gwi' query param.");const r=g(t);m("tagData",r),w(r,e=>{m("constrain",e);{var o=e,n=l(o,"data.dmn");let t=l(o,"data.cpid");(o=/(_ctpuid.*?);/.exec(i.document.cookie))&&1<o.length&&([,o]=o[1].split("="),t=o),(o=new Date).setDate(o.getDate()+90),i.document.cookie=`_ctpuid=; expires=Thu, 01 Jan 1970 00:00:00 UTC;domain=${n}; path=/;`,i.document.cookie=`_ctpuid=${t};expires=${o.toGMTString()};domain=${n};path=/;`}k(e)?a("boot sequence terminated: userOptedOut != false"):T(r,t=>{m("icc",t),m("ensureModule",M);t=t.bootloader;if(!t)return a("boot sequence terminated: no Bootloader config found");var e=r.fpcsEnabled?{www:r.hostName,static:r.hostName.replace("compare","compare-static"),images:r.hostName.replace("compare","compare-images")}:{www:"www.clicktripz.com",static:"static.clicktripz.com",images:"images.clicktripz.com"};m("hostnames",t.fpcsHostnames||e),S(t)})})}},0)}i._ctrequire=L;try{i._CTZ_RELOAD=function(){const t=h();let e=!1;return function(){try{t||e||h()&&(G(),e=!0)}catch(t){d(t)}}}()}catch(t){d(t)}return{_get:l,coerceBoolean:p,consoleLog:a,consoleError:d,getCookieVal:f,setGlobal:m,getGlobal:o,request:r,ensureUserConsent:h,getTag:b,getTagData:g,determineConstrainUrl:C,callConstrain:y,callConstrainWithCookieSync:v,callConstrainWithoutCookieSync:E,ensureConstrains:w,callIcc:T,userOptedOut:k,loadMain:O,ensureLoadForInteractionEvents:A,ensureLoadForConfiguration:S,ensureModule:M,getUrlForAssetName:j,boot:G}},t.exports(window).boot()}();